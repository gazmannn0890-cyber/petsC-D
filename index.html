<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêæ PetsHub - –ú–∏—Ä –¥–æ–º–∞—à–Ω–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="background-animation">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <header>
        <h1>üêæ –õ—é–±–∏—Ç–µ –¥–æ–º–∞—à–Ω–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö?</h1>
        <nav>
            <a href="#" class="nav-link">üê∂ –°–æ–±–∞–∫</a>
            <a href="#" class="nav-link">üôÄ –ö–æ—à–µ–∫</a>
            <a href="#" class="nav-link">ü¶Ü –£—Ç—è—Ç</a>
            <a href="#" class="nav-link">üê∞ –ì—Ä—ã–∑—É–Ω–æ–≤</a>
            <a href="#" class="nav-link">üê† –†—ã–±–æ–∫</a>
        </nav>
    </header>

    <main>
        <section class="section intro fade-in">
            <h2>–ü—Ä–∏–≤–µ—Ç, –º—ã PetsHub! üéâ</h2>
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–π –º–∏—Ä –¥–æ–º–∞—à–Ω–∏—Ö –ø–∏—Ç–æ–º—Ü–µ–≤! –ú—ã —Å–æ–∑–¥–∞–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –ª—é–±–∏—Ç–µ–ª–µ–π –∂–∏–≤–æ—Ç–Ω—ã—Ö.</p>
            <img src="https://images.unsplash.com/photo-1450778869180-41d0601e046e?w=600&h=400&fit=crop" alt="–ú–∏–ª—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ">
        </section>

        <section class="section about fade-in">
            <h2>–ü–æ—á–µ–º—É –Ω–∞—Å –æ–±–æ–∂–∞—é—Ç? üíñ</h2>
            <p>–ù–∞—à–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∞–π—Ç, –∞ –Ω–∞—Å—Ç–æ—è—â–∞—è —Å–µ–º—å—è –ª—é–±–∏—Ç–µ–ª–µ–π –∂–∏–≤–æ—Ç–Ω—ã—Ö!</p>
            <ul>
                <li>üòé –ö—Ä—É—Ç—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</li>
                <li>‚ò∫ –£–º–∏–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ</li>
                <li>üòÇ –°–º–µ—à–Ω—ã–µ –≤–∏–¥–µ–æ</li>
                <li>ü§ù –ü–æ–º–æ—â—å –∏ —Å–æ–≤–µ—Ç—ã</li>
                <li>üéØ –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏</li>
                <li>üèÜ –ö–æ–Ω–∫—É—Ä—Å—ã –∏ –ø—Ä–∏–∑—ã</li>
            </ul>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–æ–∫ -->
        <section class="section rating-section fade-in">
            <h2>–û—Ü–µ–Ω–∏—Ç–µ –Ω–∞—à –±—É–¥—É—â–∏–π —Å–∞–π—Ç! üåü</h2>
            <p>–ü–æ–º–æ–≥–∏—Ç–µ –Ω–∞–º —Å—Ç–∞—Ç—å –ª—É—á—à–µ - –ø–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥</p>
            
            <div class="stars-container">
                <div class="stars" id="stars">
                    <span class="star" data-value="1">‚òÖ</span>
                    <span class="star" data-value="2">‚òÖ</span>
                    <span class="star" data-value="3">‚òÖ</span>
                    <span class="star" data-value="4">‚òÖ</span>
                    <span class="star" data-value="5">‚òÖ</span>
                </div>
                <p class="rating-text" id="ratingText">–ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –∑–≤–µ–∑–¥—ã –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É! ‚ú®</p>
            </div>
            <div id="ratingResult" class="rating-result"></div>
        </section>

        <section class="section fade-in">
            <h2>–°–∫–æ—Ä–æ –±—É–¥–µ—Ç! üöÄ</h2>
            <p>–ú—ã –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –Ω–æ–≤—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏:</p>
            <ul>
                <li>üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</li>
                <li>üë• –§–æ—Ä—É–º—ã –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è</li>
                <li>üõí –ú–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–∏—Ç–æ–º—Ü–µ–≤</li>
                <li>üé• –ü—Ä—è–º—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏</li>
                <li>üìö –≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –∂–∏–≤–æ—Ç–Ω—ã—Ö</li>
            </ul>
        </section>
    </main>

    <footer class="fade-in">
        <p>¬© 2024 PetsHub. –° –ª—é–±–æ–≤—å—é –∫ –∫–∞–∂–¥–æ–º—É –ø–∏—Ç–æ–º—Ü—É! üíù</p>
        <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏: <a href="mailto:hello@petshub.com">hello@petshub.com</a></p>
        <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É! üêïüêàüê§</p>
    </footer>

    <!-- –ü–û–õ–ù–´–ô JavaScript –∫–æ–¥ -->
    <script>
        // –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –∑–≤–µ–∑–¥–∞–º–∏ —Å —Ñ–∏–∫—Å–∞—Ü–∏–µ–π
        const stars = document.querySelectorAll('.star');
        const ratingText = document.getElementById('ratingText');
        const ratingResult = document.getElementById('ratingResult');
        let currentRating = 0;
        let ratingSubmitted = false;

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –æ—Ü–µ–Ω–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function checkExistingRating() {
            const existingRating = localStorage.getItem('petshub_user_rating');
            if (existingRating) {
                currentRating = parseInt(existingRating);
                ratingSubmitted = true;
                updateStars(currentRating);
                disableStars();
                ratingText.textContent = `–°–ø–∞—Å–∏–±–æ! –í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞: ${currentRating} ‚≠ê —É–∂–µ —É—á—Ç–µ–Ω–∞!`;
                ratingText.style.color = '#28a745';
            }
        }

        // –û—Ç–∫–ª—é—á–∞–µ–º –∑–≤–µ–∑–¥—ã –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
        function disableStars() {
            stars.forEach(star => {
                star.style.cursor = 'default';
                star.style.pointerEvents = 'none';
            });
            document.querySelector('.stars').style.cursor = 'default';
        }

        // –í–∫–ª—é—á–∞–µ–º –∑–≤–µ–∑–¥—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å)
        function enableStars() {
            stars.forEach(star => {
                star.style.cursor = 'pointer';
                star.style.pointerEvents = 'auto';
            });
            document.querySelector('.stars').style.cursor = 'pointer';
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∑–≤–µ–∑–¥
        stars.forEach(star => {
            star.addEventListener('click', function() {
                if (ratingSubmitted) {
                    showRatingResult('–í—ã —É–∂–µ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –æ—Ü–µ–Ω–∫—É! –°–ø–∞—Å–∏–±–æ! üíù', true);
                    return;
                }
                
                currentRating = parseInt(this.getAttribute('data-value'));
                ratingSubmitted = true;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–∫—Ç –æ—Ü–µ–Ω–∫–∏ –≤ localStorage
                localStorage.setItem('petshub_user_rating', currentRating);
                localStorage.setItem('petshub_rating_timestamp', new Date().toISOString());
                
                updateStars(currentRating);
                disableStars();
                sendRatingWithLocation(currentRating);
            });

            star.addEventListener('mouseover', function() {
                if (!ratingSubmitted) {
                    const hoverRating = parseInt(this.getAttribute('data-value'));
                    updateStars(hoverRating, false);
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É—Ö–æ–¥–∞ –º—ã—à–∏ —Å –±–ª–æ–∫–∞ –∑–≤–µ–∑–¥
        document.querySelector('.stars').addEventListener('mouseleave', function() {
            if (!ratingSubmitted) {
                updateStars(currentRating, true);
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –∑–≤–µ–∑–¥
        function updateStars(rating, isPermanent = true) {
            stars.forEach(star => {
                const starValue = parseInt(star.getAttribute('data-value'));
                if (starValue <= rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });

            if (isPermanent && !ratingSubmitted) {
                const messages = [
                    "–ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –∑–≤–µ–∑–¥—ã –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É! ‚ú®",
                    "–ü–ª–æ—Ö–æ üòû - –°–ø–∞—Å–∏–±–æ –∑–∞ —á–µ—Å—Ç–Ω–æ—Å—Ç—å!",
                    "–¢–∞–∫ —Å–µ–±–µ üòê - –ü–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è –ª—É—á—à–µ!", 
                    "–ù–æ—Ä–º–∞–ª—å–Ω–æ üôÇ - –†–∞–¥—ã —á—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å!",
                    "–•–æ—Ä–æ—à–æ üòä - –û—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ!",
                    "–û—Ç–ª–∏—á–Ω–æ! ü§© - –í—ã –¥–µ–ª–∞–µ—Ç–µ –Ω–∞—Å –ª—É—á—à–µ!"
                ];
                ratingText.textContent = messages[rating] || messages[0];
                ratingText.style.color = 'white';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ü–µ–Ω–∫–∏ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ IP
        function sendRatingWithLocation(rating) {
            ratingResult.innerHTML = '<div class="rating-info">‚åõ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–∞—à—É –æ—Ü–µ–Ω–∫—É...</div>';
            ratingResult.className = 'rating-result show';

            // –°–æ–±–∏—Ä–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            const timestamp = new Date().toISOString();
            const userAgent = navigator.userAgent;
            const screenResolution = `${screen.width}x${screen.height}`;
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const language = navigator.language;
            const platform = navigator.platform;
            const userId = generateUserId();

            // –ü–æ–ª—É—á–∞–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ IP
            getLocationByIP()
                .then(ipLocation => {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å –≥–µ–æ –ø–æ IP
                    saveRatingData({
                        rating: rating,
                        timestamp: timestamp,
                        userAgent: userAgent,
                        screenResolution: screenResolution,
                        timezone: timezone,
                        language: language,
                        platform: platform,
                        pageUrl: window.location.href,
                        userRatingId: userId,
                        ipLocation: ipLocation,
                        locationMethod: 'ip'
                    });
                    
                    showRatingResult(`–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É ${rating} ‚≠ê! –í–∞—à –æ—Ç–∑—ã–≤ –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω –¥–ª—è –Ω–∞—Å! üíù`, true);
                    ratingText.textContent = `–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞: ${rating} ‚≠ê —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!`;
                    ratingText.style.color = '#28a745';
                })
                .catch(error => {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –≥–µ–æ
                    saveRatingData({
                        rating: rating,
                        timestamp: timestamp,
                        userAgent: userAgent,
                        screenResolution: screenResolution,
                        timezone: timezone,
                        language: language,
                        platform: platform,
                        pageUrl: window.location.href,
                        userRatingId: userId,
                        ipLocation: { error: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ' },
                        locationMethod: 'failed'
                    });
                    
                    showRatingResult(`–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É ${rating} ‚≠ê!`, true);
                    ratingText.textContent = `–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞: ${rating} ‚≠ê —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!`;
                    ratingText.style.color = '#28a745';
                });
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ IP
        function getLocationByIP() {
            return new Promise((resolve, reject) => {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–¥–µ–∂–Ω—ã–π IP-API
                const ipApis = [
                    'https://api.ipify.org?format=json',
                    'https://ipinfo.io/json?token=test', // –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –±–µ–∑ —Ç–æ–∫–µ–Ω–∞
                    'https://api.db-ip.com/v2/free/self'
                ];

                let currentApiIndex = 0;

                function tryNextApi() {
                    if (currentApiIndex >= ipApis.length) {
                        reject(new Error('–í—Å–µ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã'));
                        return;
                    }

                    const apiUrl = ipApis[currentApiIndex];
                    
                    fetch(apiUrl, {
                        method: 'GET',
                        mode: 'cors',
                        headers: {
                            'Accept': 'application/json'
                        }
                    })
                    .then(response => {
                        if (!response.ok) throw new Error('API –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');
                        return response.json();
                    })
                    .then(data => {
                        let locationData = {};
                        
                        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
                        if (apiUrl.includes('ipify.org')) {
                            locationData = {
                                ip: data.ip,
                                country: '–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ IP',
                                city: '–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ IP'
                            };
                        } else if (apiUrl.includes('ipinfo.io')) {
                            const [lat, lon] = data.loc ? data.loc.split(',') : [null, null];
                            locationData = {
                                ip: data.ip,
                                country: data.country || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                region: data.region || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                city: data.city || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                latitude: lat,
                                longitude: lon,
                                timezone: data.timezone,
                                org: data.org || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'
                            };
                        } else if (apiUrl.includes('db-ip.com')) {
                            locationData = {
                                ip: data.ipAddress,
                                country: data.countryName || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                region: data.stateProv || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                city: data.city || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                latitude: data.latitude,
                                longitude: data.longitude,
                                timezone: data.timeZone
                            };
                        } else {
                            locationData = {
                                ip: data.ip || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                country: '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ',
                                city: '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'
                            };
                        }
                        
                        console.log('üìç –î–∞–Ω–Ω—ã–µ –ø–æ IP:', locationData);
                        resolve(locationData);
                    })
                    .catch(error => {
                        console.log(`‚ùå API ${apiUrl} –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ:`, error);
                        currentApiIndex++;
                        setTimeout(tryNextApi, 100);
                    });
                }

                tryNextApi();
            });
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function generateUserId() {
            return 'user_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now().toString(36);
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–∫–∏
        function saveRatingData(data) {
            console.log('üêæ –î–∞–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ PetsHub:', data);
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ Formspree (–Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É)
            sendToFormspree(data);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
            saveToLocalStorage(data);
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É —á–µ—Ä–µ–∑ Formspree
        function sendToFormspree(data) {
            const formspreeUrl = 'https://formspree.io/f/xnngbeqz';
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
            const locationText = data.ipLocation ? `
üìç –ú–ï–°–¢–û–ü–û–õ–û–ñ–ï–ù–ò–ï –ü–û IP:
   IP: ${data.ipLocation.ip || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'}
   –°—Ç—Ä–∞–Ω–∞: ${data.ipLocation.country || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'}
   –†–µ–≥–∏–æ–Ω: ${data.ipLocation.region || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'}
   –ì–æ—Ä–æ–¥: ${data.ipLocation.city || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'}
   –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${data.ipLocation.latitude || 'N/A'}, ${data.ipLocation.longitude || 'N/A'}
   –ü—Ä–æ–≤–∞–π–¥–µ—Ä: ${data.ipLocation.org || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'}
   –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${data.ipLocation.timezone || 'N/A'}
            `.trim() : 'üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å';

            const emailData = {
                _subject: `üêæ –ù–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ PetsHub: ${data.rating} ‚≠ê`,
                _replyTo: 'noreply@petshub.com',
                rating: data.rating,
                timestamp: new Date(data.timestamp).toLocaleString('ru-RU'),
                userAgent: data.userAgent,
                screenResolution: data.screenResolution,
                timezone: data.timezone,
                language: data.language,
                platform: data.platform,
                pageUrl: data.pageUrl,
                userRatingId: data.userRatingId,
                location: locationText
            };
            
            fetch(formspreeUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(emailData)
            })
            .then(response => {
                if (response.ok) {
                    console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É!');
                } else {
                    console.log('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏, –Ω–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ');
                    saveFailedSubmission(data);
                }
            })
            .catch(error => {
                console.log('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ');
                saveFailedSubmission(data);
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
        function saveFailedSubmission(data) {
            try {
                const failed = JSON.parse(localStorage.getItem('petshub_failed_submissions') || '[]');
                failed.push({
                    ...data,
                    failedAt: new Date().toISOString()
                });
                localStorage.setItem('petshub_failed_submissions', JSON.stringify(failed));
                console.log('üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏');
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ—É–¥–∞—á–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏:', e);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
        function saveToLocalStorage(data) {
            try {
                const ratings = JSON.parse(localStorage.getItem('petshub_ratings') || '[]');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –æ—Ü–µ–Ω–∫–∏ –æ—Ç —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const existingUserRating = ratings.find(r => r.userRatingId === data.userRatingId);
                if (!existingUserRating) {
                    ratings.push(data);
                    localStorage.setItem('petshub_ratings', JSON.stringify(ratings));
                    console.log('üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');
                } else {
                    console.log('‚ö†Ô∏è –û—Ü–µ–Ω–∫–∞ –æ—Ç —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
                }
            } catch (e) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage:', e);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ü–µ–Ω–∫–∏
        function showRatingResult(message, isSuccess) {
            ratingResult.innerHTML = `
                <div class="rating-info ${isSuccess ? 'success' : 'error'}">
                    ${message}
                </div>
            `;
        }

        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ü–†–û–°–ú–û–¢–†–ê –î–ê–ù–ù–´–• –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–û–ú =====

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—Ü–µ–Ω–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
        function showAllRatings() {
            const ratings = JSON.parse(localStorage.getItem('petshub_ratings') || '[]');
            console.log('üìä –í–°–ï –û–¶–ï–ù–ö–ò PETSHUB:');
            console.log('========================');
            
            if (ratings.length === 0) {
                console.log('‚ùå –û—Ü–µ–Ω–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç');
                return [];
            }
            
            ratings.forEach((rating, index) => {
                console.log(`\nüéØ –û—Ü–µ–Ω–∫–∞ #${index + 1}:`);
                console.log(`‚≠ê –û—Ü–µ–Ω–∫–∞: ${rating.rating} –∑–≤–µ–∑–¥`);
                console.log(`üë§ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${rating.userRatingId}`);
                
                if (rating.ipLocation && !rating.ipLocation.error) {
                    console.log(`üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ IP:`);
                    console.log(`   IP: ${rating.ipLocation.ip}`);
                    console.log(`   –°—Ç—Ä–∞–Ω–∞: ${rating.ipLocation.country}`);
                    console.log(`   –ì–æ—Ä–æ–¥: ${rating.ipLocation.city}`);
                    if (rating.ipLocation.latitude) {
                        console.log(`   –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${rating.ipLocation.latitude}, ${rating.ipLocation.longitude}`);
                    }
                    console.log(`   –ü—Ä–æ–≤–∞–π–¥–µ—Ä: ${rating.ipLocation.org}`);
                } else {
                    console.log(`üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å`);
                }
                
                console.log(`üïê –í—Ä–µ–º—è: ${new Date(rating.timestamp).toLocaleString('ru-RU')}`);
                console.log(`üåê –ë—Ä–∞—É–∑–µ—Ä: ${rating.userAgent?.substring(0, 80)}...`);
                console.log(`üíª –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${rating.platform}`);
                console.log(`üñ•Ô∏è –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ${rating.screenResolution}`);
                console.log(`üåç –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${rating.timezone}`);
                console.log(`üó£Ô∏è –Ø–∑—ã–∫: ${rating.language}`);
                console.log('------------------------');
            });
            
            console.log(`\nüìà –í–°–ï–ì–û –û–¶–ï–ù–û–ö: ${ratings.length}`);
            
            // –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
            const uniqueUsers = [...new Set(ratings.map(r => r.userRatingId))];
            console.log(`üë• –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${uniqueUsers.length}`);
            
            return ratings;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –Ω–µ—É–¥–∞–≤—à–∏–µ—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        function showFailedSubmissions() {
            const failed = JSON.parse(localStorage.getItem('petshub_failed_submissions') || '[]');
            console.log('‚ùå –ù–ï–£–î–ê–í–®–ò–ï–°–Ø –û–¢–ü–†–ê–í–ö–ò:');
            console.log('======================');
            
            if (failed.length === 0) {
                console.log('‚úÖ –í—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω—ã!');
                return;
            }
            
            failed.forEach((submission, index) => {
                console.log(`\nüö´ –ù–µ—É–¥–∞—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ #${index + 1}:`);
                console.log(`‚≠ê –û—Ü–µ–Ω–∫–∞: ${submission.rating}`);
                console.log(`üë§ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${submission.userRatingId}`);
                console.log(`üïê –í—Ä–µ–º—è: ${new Date(submission.timestamp).toLocaleString('ru-RU')}`);
                console.log(`‚ùå –û—à–∏–±–∫–∞ –≤: ${new Date(submission.failedAt).toLocaleString('ru-RU')}`);
            });
            
            console.log(`\nüìä –í—Å–µ–≥–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫: ${failed.length}`);
        }

        // –°–∫–∞—á–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª
        function downloadRatingsData() {
            const ratings = JSON.parse(localStorage.getItem('petshub_ratings') || '[]');
            
            if (ratings.length === 0) {
                console.log('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è');
                return;
            }
            
            const dataStr = JSON.stringify(ratings, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `petshub_ratings_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            console.log('üíæ –î–∞–Ω–Ω—ã–µ —Å–∫–∞—á–∞–Ω—ã! –§–∞–π–ª:', link.download);
            console.log('üìä –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:', ratings.length);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        function showStats() {
            const ratings = JSON.parse(localStorage.getItem('petshub_ratings') || '[]');
            
            if (ratings.length === 0) {
                console.log('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏');
                return;
            }
            
            const stats = {
                total: ratings.length,
                byRating: {1: 0, 2: 0, 3: 0, 4: 0, 5: 0},
                withLocation: 0,
                today: 0,
                byBrowser: {},
                byPlatform: {},
                uniqueUsers: [...new Set(ratings.map(r => r.userRatingId))].length
            };
            
            ratings.forEach(rating => {
                stats.byRating[rating.rating]++;
                if (rating.ipLocation && !rating.ipLocation.error) stats.withLocation++;
                
                // –°–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏
                if (new Date(rating.timestamp).toDateString() === new Date().toDateString()) {
                    stats.today++;
                }
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±—Ä–∞—É–∑–µ—Ä–∞–º
                const browser = rating.userAgent?.includes('Chrome') ? 'Chrome' : 
                               rating.userAgent?.includes('Firefox') ? 'Firefox' : 
                               rating.userAgent?.includes('Safari') ? 'Safari' : '–î—Ä—É–≥–æ–π';
                stats.byBrowser[browser] = (stats.byBrowser[browser] || 0) + 1;
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
                const platform = rating.platform || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                stats.byPlatform[platform] = (stats.byPlatform[platform] || 0) + 1;
            });
            
            console.log('üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê PETSHUB:');
            console.log('=====================');
            console.log(`üë• –í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫: ${stats.total}`);
            console.log(`üë§ –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${stats.uniqueUsers}`);
            console.log(`üìç –° –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è: ${stats.withLocation} (${Math.round(stats.withLocation/stats.total*100)}%)`);
            console.log(`üìÖ –°–µ–≥–æ–¥–Ω—è: ${stats.today}`);
            console.log('\n‚≠ê –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –û–¶–ï–ù–û–ö:');
            for (let i = 1; i <= 5; i++) {
                const count = stats.byRating[i];
                const percent = Math.round(count/stats.total*100);
                console.log(`   ${'‚≠ê'.repeat(i)}${'‚òÜ'.repeat(5-i)} ${i} –∑–≤–µ–∑–¥: ${count} (${percent}%)`);
            }
            
            console.log('\nüåê –ë–†–ê–£–ó–ï–†–´:');
            Object.entries(stats.byBrowser).forEach(([browser, count]) => {
                console.log(`   ${browser}: ${count}`);
            });
            
            console.log('\nüíª –ü–õ–ê–¢–§–û–†–ú–´:');
            Object.entries(stats.byPlatform).forEach(([platform, count]) => {
                console.log(`   ${platform}: ${count}`);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –æ—Ü–µ–Ω–∫–∏ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
        function resetRating() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤–∞—à—É –æ—Ü–µ–Ω–∫—É? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –µ—ë –∏–∑ —Å–∏—Å—Ç–µ–º—ã.')) {
                localStorage.removeItem('petshub_user_rating');
                localStorage.removeItem('petshub_rating_timestamp');
                currentRating = 0;
                ratingSubmitted = false;
                enableStars();
                updateStars(0);
                ratingText.textContent = "–ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –∑–≤–µ–∑–¥—ã –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É! ‚ú®";
                ratingText.style.color = 'white';
                ratingResult.innerHTML = '';
                ratingResult.className = 'rating-result';
                console.log('‚úÖ –û—Ü–µ–Ω–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞');
            }
        }

        // –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
        function clearAllData() {
            if (confirm('‚ùå –í–´ –£–í–ï–†–ï–ù–´? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –æ—Ü–µ–Ω–æ–∫!')) {
                localStorage.removeItem('petshub_ratings');
                localStorage.removeItem('petshub_failed_submissions');
                localStorage.removeItem('petshub_user_rating');
                localStorage.removeItem('petshub_rating_timestamp');
                console.log('‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã');
            }
        }

        // === –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –æ—Ü–µ–Ω–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        checkExistingRating();
        
        console.log(`
üêæ PETSHUB - –°–ò–°–¢–ï–ú–ê –û–¶–ï–ù–û–ö –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê!

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤–≤–µ–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:

showAllRatings()       - –≤—Å–µ –æ—Ü–µ–Ω–∫–∏ —Å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º
showStats()            - –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
showFailedSubmissions() - –Ω–µ—É–¥–∞–≤—à–∏–µ—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∏
downloadRatingsData()   - —Å–∫–∞—á–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON
resetRating()          - —Å–±—Ä–æ—Å–∏—Ç—å —Å–≤–æ—é –æ—Ü–µ–Ω–∫—É (–¥–ª—è —Ç–µ—Å—Ç–∞)
clearAllData()         - –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)

üìß –í—Å–µ –æ—Ü–µ–Ω–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É —á–µ—Ä–µ–∑ Formspree!
üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ IP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
‚≠ê –û—Ü–µ–Ω–∫–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∞!
        `);

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        const ratings = JSON.parse(localStorage.getItem('petshub_ratings') || '[]');
        if (ratings.length > 0) {
            console.log(`üìä –ì–æ—Ç–æ–≤–æ! –£–∂–µ —Å–æ–±—Ä–∞–Ω–æ –æ—Ü–µ–Ω–æ–∫: ${ratings.length}`);
            console.log(`üë§ –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${[...new Set(ratings.map(r => r.userRatingId))].length}`);
        }
    </script>
</body>
</html>
